## Тестовое задание: Разработка веб-API для управления проектами и задачами (Project & Task API)

### Описание задачи
Необходимо разработать веб-приложение на ASP.NET Core, которое предоставляет API для управления проектами и задачами. Каждый проект может содержать несколько задач. Приложение должно поддерживать базовые CRUD-операции для проектов и задач, а также включать дополнительные функции, такие как фильтрация и пагинация.

---

### Требования к реализации

#### 1. **Создание проекта**
   - Создайте новый проект ASP.NET Core Web API.
   - Используйте .NET 8.

#### 2. **База данных**
   - Используйте **Entity Framework Core** для работы с базой данных.
   - В качестве СУБД используйте **PostgreSQL**.
   - Используйте миграции для настройки базы данных. Количество миграций должно быть более 1 (например, для добавление каждой из моделей должно быть сделано отдельной миграцией)
   - Используйте метод `MigrateAsync` для выполнения миграций при запуске приложения
   - Используйте метод `UseAsyncSeeding` для заполнения БД тестовыми данными
   - Конфигурация моделей данных должна выполняться с использованием `IEntityTypeConfiguration<TEntity>` для каждой модели

#### 3. **Модели данных**
   - Создайте две модели:
     1. **Проект (`Project`)**:
        - `Id` (уникальный идентификатор проекта, тип `Guid` или `int`).
        - `Name` (название проекта, тип `string`).
        - `Description` (описание проекта, тип `string`).
        - `CreatedAt` (дата создания проекта, тип `DateTime`).
        - `Tasks` (список задач, связанных с проектом, тип `ICollection<Task>`).

     2. **Задача (`Task`)**:
        - `Id` (уникальный идентификатор задачи, тип `Guid` или `int`).
        - `Title` (название задачи, тип `string`).
        - `Description` (описание задачи, тип `string`).
        - `IsCompleted` (статус выполнения задачи, тип `bool`).
        - `CreatedAt` (дата создания задачи, тип `DateTime`).
        - `UpdatedAt` (дата последнего обновления задачи, тип `DateTime`).
        - `ProjectId` (внешний ключ для связи с проектом, тип `int` или `Guid`).
        - `Project` (навигационное свойство для связи с проектом, тип `Project`).

   - Настройте связь **один ко многим** между `Project` и `Task` (один проект может содержать много задач).

#### 4. **Реализация API**
   Реализуйте следующие endpoints:

   - **Проекты**:
     - **GET /api/projects**:
       - Возвращает список всех проектов.
       - Поддержка пагинации (параметры `page` и `pageSize`).
       - Пример: `GET /api/projects?page=1&pageSize=10`.

     - **GET /api/projects/{id}**:
       - Возвращает проект по его идентификатору вместе с задачами.

     - **POST /api/projects**:
       - Создает новый проект.
       - Пример тела запроса:
         ```json
         {
           "name": "Проект 1",
           "description": "Описание проекта 1"
         }
         ```

     - **PUT /api/projects/{id}**:
       - Обновляет существующий проект.
       - Пример тела запроса:
         ```json
         {
           "name": "Обновленный проект 1",
           "description": "Обновленное описание проекта 1"
         }
         ```

     - **DELETE /api/projects/{id}**:
       - Удаляет проект по его идентификатору (вместе с связанными задачами).

   - **Задачи**:
     - **GET /api/tasks**:
       - Возвращает список всех задач.
       - Поддержка фильтрации по статусу (`isCompleted`) и проекту (`projectId`).
       - Пример: `GET /api/tasks?isCompleted=true&projectId=1`.

     - **GET /api/tasks/{id}**:
       - Возвращает задачу по её идентификатору.

     - **POST /api/tasks**:
       - Создает новую задачу.
       - Пример тела запроса:
         ```json
         {
           "title": "Купить продукты",
           "description": "Молоко, хлеб, яйца",
           "isCompleted": false,
           "projectId": 1
         }
         ```

     - **PUT /api/tasks/{id}**:
       - Обновляет существующую задачу.
       - Пример тела запроса:
         ```json
         {
           "title": "Купить продукты",
           "description": "Молоко, хлеб, яйца, сыр",
           "isCompleted": true,
           "projectId": 1
         }
         ```

     - **DELETE /api/tasks/{id}**:
       - Удаляет задачу по её идентификатору.

#### 5. **Валидация**
   - Добавьте валидацию для входных данных (например, `Name` проекта не может быть пустым, `Title` задачи не может быть длиннее 100 символов).
   - Используйте FluentValidation для конфигурации правил валидации (устанавливать в проект через nuget).

#### 6. **Модульное тестирование**
   - Напишите модульные тесты для контроллеров `ProjectsController` и `TasksController` с использованием **xUnit** или **NUnit**.
   - Протестируйте все основные сценарии (создание, чтение, обновление, удаление, фильтрация, пагинация).
   - Используйте **Moq** для мокирования зависимостей (например, репозитория).

#### 7. **Документация API**
   - Добавьте документацию API с использованием **Swagger**.
   - Убедитесь, что все endpoints описаны и доступны через Swagger UI.

#### 8. **Логирование**
   - Добавьте логирование (например, с использованием стандартного `ILogger`) для ключевых операций (создание, обновление, удаление проектов и задач).

#### 9. **Обработка ошибок**
   - Реализуйте глобальную обработку ошибок с использованием `IExceptionHandler`.
   - Возвращайте соответствующие HTTP-статусы (например, 404 для не найденного проекта или задачи, 400 для невалидных данных).

#### 10. **Кэширование**:
   - Добавьте кэширование для endpoint `GET /api/projects` и `GET /api/tasks` с использованием **MemoryCache** или **Redis**.
   
#### 11. **Контейнеризация**:
   - Создайте Dockerfile для сборки приложения.
   - Создайте Docker-compose файл для запуска проекта, в котором помимо разрабатываемого сервиса должны быть добавлены СУБД PostgreSql, Redis (при необходимости) и настроено взаимодействие между ними (проверка работоспособности будет проводится с использованием Docker-compose файла).

#### 12. **Система контроля версий**:
   - Используйте репозиторий в GitHub или Gitlab
   - Каждый день следует выполнять commit'ы в выбранную систему контроля версией для отслеживания статуса работ
   - Должна быть ветка dev, в которую должны выполняться MR или PR.
   - Для каждой функциональности используйте новую ветку.
   
---

### Дополнительные задания (опционально)
1. **Интеграционные тесты**:
   - Напишите интеграционные тесты для API с использованием **WebApplicationFactory**.

2. **Аутентификация и авторизация**:
   - Добавьте поддержку JWT-аутентификации или Basic аутентификацию.
   - Ограничьте доступ к endpoints (например, только аутентифицированные пользователи могут создавать или удалять проекты и задачи).
   
---

### Критерии оценки
1. **Качество кода**:
   - Чистый, читаемый код.
   - Соблюдение принципов SOLID.
   - Использование Dependency Injection.

2. **Работоспособность API**:
   - Все endpoints работают корректно.
   - Поддержка пагинации, фильтрации и валидации.

3. **Тестирование**:
   - Наличие модульных тестов.
   - Покрытие ключевых сценариев.

4. **Документация**:
   - Наличие Swagger-документации.
   - Описание endpoints и моделей.

5. **Обработка ошибок**:
   - Корректная обработка исключений.
   - Возврат соответствующих HTTP-статусов.

6. **Кэширование**:
   - Наличие кеширования для запросов чтения проектов и задач.
   
7. **Контейнеризация**:
   - Наличие docker файла, позволяющего собрать приложение в образ.
   - Наличие docker-compose файла, позволяющего запустить сборку приложения и запуск со всеми требуемыми зависимостями (PostgreSql и т.д.).
   
8. **Дополнительные задания**:
   - Выполнение опциональных заданий (Интеграционные тесты, аутентификация).
   
---

### Время выполнения
- Ожидаемое время выполнения: **5-7 дней**.

---

### Как сдать задание
- Кандидат в начале выполнения задания должен предоставить ссылку на репозиторий GitHub или Gitlab с исходным кодом.
- В README.md должно быть описание проекта, инструкции по запуску и тестированию.